<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>All Products</title>
</head>
<body>

<h1>All Products</h1>
<div id="products"></div>

<script>
window.addEventListener('DOMContentLoaded', async () => {
    try {
        // Change this if your backend runs on a different port
        const res = await fetch('http://localhost:3000/products');
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const products = await res.json();

        const container = document.getElementById('products');

        products.forEach(product => {
            const div = document.createElement('div');
            div.style.border = '1px solid black';
            div.style.padding = '10px';
            div.style.margin = '10px 0';

            div.innerHTML = `
                <h3>${product.name}</h3>
                <p>ID: ${product.id}</p>
                <p>Price: ${product.price}</p>
                <p>${product.description || ''}</p>
                ${product.images?.[0] ? `<img src="${product.images[0].src}" style="max-width:150px;">` : ''}
            `;

            container.appendChild(div);
        });
    } catch (err) {
        console.error('Error loading products:', err);
        document.getElementById('products').textContent = 'Failed to load products';
    }
});
</script>

</body>
</html>
